# AI Platform Frontend

Vanilla JS фронтенд для **Telegram Mini App** и обычного Web.

## Что исправлено

- **Гостевой режим реально работает**: приложение не требует `token` для запуска.
  - Чат доступен всегда (в госте — **DEMO режим** без бэкенда).
  - Проекты в госте — **локально в localStorage**.
  - Разделы, которым нужен аккаунт/БД (Keys/Reminders/Calendar/Notifications/Admin) — показывают экран «Нужен вход».
- Telegram BackButton привязан **один раз** (без накопления обработчиков).
- Добавлены таймауты запросов и обработка `401` (сброс токена при истечении).
- Добавлена настройка **API base** (важно для GitHub Pages: там нет nginx-proxy на `/api`).

## Новые функции (много)

### Чат
- DEMO-режим для гостя (+ команды `/help /sum /todo /idea`).
- Настройки запроса: **system prompt**, temperature, max tokens, json_mode.
- Markdown-рендеринг ответов (безопасный минимальный рендер).
- Typewriter-анимация (можно отключить) + настройка «reduce motion».
- Поиск по чату + подсветка совпадений.
- Экспорт/импорт истории чата в JSON.
- Копировать последний ответ.
- «Изменить последний запрос» (подставляет в инпут).
- Удаление сообщения по правому клику.
- Автосохранение черновика.

### Проекты
- Локальные проекты для гостя (create/edit/delete).
- Фильтр и сортировка.
- Экспорт/импорт проектов в JSON.

### Настройки/Диагностика
- Переключение темы: auto/light/dark.
- Reduce motion.
- Сброс локальных данных (чат/проекты/настройки).
- Ping `/health`.
- Отдельная страница «Диагностика» + копирование отчёта.
- Страница «Горячие клавиши».

## Важно про «настоящего гостя» (нужен бэкенд)

Если ты хочешь, чтобы гость **реально** мог пользоваться AI (делать запросы в провайдера) без регистрации — это обязательно делается в бэкенде:

- выдача **временного guest JWT**
- жёсткие лимиты (rate limit / дневные квоты / ограничения моделей)
- защита от абьюза

Фронтенд уже готов поддерживать отсутствие токена; но реальный доступ к AI без аккаунта — это серверная политика.

## Запуск

### Просто открыть

Открой `index.html` любым статическим сервером.

### Docker (nginx)

```bash
docker compose up --build
```

Открой `http://localhost:8080`.

## Настройка API base

- По умолчанию: `/api/v1` (работает с nginx proxy внутри docker).
- Для GitHub Pages/отдельного фронта: в **Настройки → API base** укажи полный URL, например:
  - `https://your-domain/api/v1`
